# Vite Plugin Env Typed

**[English Documentation](https://github.com/JsonLee12138/vite-plugin-env-typed/blob/main/README.en.md)**

## 介绍

`vite-plugin-env-typed` 是一个 Vite 插件，用于自动生成 `import_meta.d.ts` 文件，为您的环境变量提供完整的 TypeScript 类型支持。通过这个插件，您可以在开发过程中获得更好的类型提示和类型检查。

## 特性

- 🚀 自动生成环境变量的类型定义
- 💡 完整的 TypeScript 支持
- ⚡️ 零配置，开箱即用
- 🔒 类型安全的环境变量访问
- 🔄 支持环境变量文件变更自动更新类型定义

## 安装

```bash
# 使用 npm
npm install vite-plugin-env-typed -D

# 使用 yarn
yarn add vite-plugin-env-typed -D

# 使用 pnpm
pnpm add vite-plugin-env-typed -D
```

## 使用方法

1. 在您的 `vite.config.ts` 中配置插件：

```typescript
import { defineConfig } from 'vite'
import envTyped from 'vite-plugin-env-typed'

export default defineConfig({
  plugins: [
    envTyped({
      // 可选：指定环境模式，默认为 process.env.NODE_ENV 或 import.meta.env.MODE
      mode: 'development',
      // 可选：指定环境变量文件所在目录，默认为 process.cwd()
      envDir: './',
      // 可选：指定环境变量前缀，默认为 'VITE_'
      envPrefix: ['VITE_', 'CUSTOM_'],
      // 可选：指定类型定义文件输出路径，默认为 'src/import_meta.d.ts'
      filePath: './src/types/import_meta.d.ts',
      // 可选：是否在类型中包含实际值，默认为 false
      valueInType: true
    })
  ]
})
```

2. 在您的代码中使用环境变量：

```typescript
// 现在您可以获得完整的类型提示
console.log(import.meta.env.VITE_API_URL)
```

## 配置选项详解

插件支持以下配置选项：

```typescript
interface EnvTypedOptions {
  /**
   * 环境模式
   * @default process.env.NODE_ENV 或 import.meta.env.MODE
   */
  mode?: 'development' | 'production' | string

  /**
   * 环境变量文件所在目录
   * @default process.cwd()
   */
  envDir?: string

  /**
   * 环境变量前缀
   * @default 'VITE_'
   */
  envPrefix?: string | string[]

  /**
   * 类型定义文件输出路径
   * @default 'src/import_meta.d.ts'
   */
  filePath?: string

  /**
   * 是否在类型中包含实际值
   * @default false
   * @example
   * // 当 valueInType 为 false 时
   * VITE_API_URL: string
   * // 当 valueInType 为 true 时
   * VITE_API_URL: 'https://api.example.com'
   */
  valueInType?: boolean
}
```

## 示例

### 基础配置

```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import envTyped from 'vite-plugin-env-typed'

export default defineConfig({
  plugins: [envTyped()]
})
```

### 自定义环境变量前缀

```typescript
// vite.config.ts
export default defineConfig({
  plugins: [
    envTyped({
      envPrefix: ['VITE_', 'CUSTOM_']
    })
  ]
})
```

### 包含实际值

```typescript
// vite.config.ts
export default defineConfig({
  plugins: [
    envTyped({
      valueInType: true
    })
  ]
})
```

## 📝 贡献指南

欢迎提交 `issue` 或 `pull request`，共同完善 `vite-plugin-env-typed`。

## 📄 许可证

MIT

## 联系我们

- [GitHub Issues](https://github.com/JsonLee12138/vite-plugin-env-typed/issues)
- Email: jsonlee_12138@icloud.com
- Discord: https://discord.gg/666U6JTCQY
