# Vite Plugin Env Typed

**[English Documentation](https://github.com/JsonLee12138/vite-plugin-env-typed/blob/main/README.en.md)**

## ä»‹ç»

`vite-plugin-env-typed` æ˜¯ä¸€ä¸ª Vite æ’ä»¶ï¼Œç”¨äºè‡ªåŠ¨ç”Ÿæˆ `import_meta.d.ts` æ–‡ä»¶ï¼Œä¸ºæ‚¨çš„ç¯å¢ƒå˜é‡æä¾›å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒã€‚é€šè¿‡è¿™ä¸ªæ’ä»¶ï¼Œæ‚¨å¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­è·å¾—æ›´å¥½çš„ç±»å‹æç¤ºå’Œç±»å‹æ£€æŸ¥ã€‚

## ç‰¹æ€§

- ğŸš€ è‡ªåŠ¨ç”Ÿæˆç¯å¢ƒå˜é‡çš„ç±»å‹å®šä¹‰
- ğŸ’¡ å®Œæ•´çš„ TypeScript æ”¯æŒ
- âš¡ï¸ é›¶é…ç½®ï¼Œå¼€ç®±å³ç”¨
- ğŸ”’ ç±»å‹å®‰å…¨çš„ç¯å¢ƒå˜é‡è®¿é—®
- ğŸ”„ æ”¯æŒç¯å¢ƒå˜é‡æ–‡ä»¶å˜æ›´è‡ªåŠ¨æ›´æ–°ç±»å‹å®šä¹‰

## å®‰è£…

```bash
# ä½¿ç”¨ npm
npm install vite-plugin-env-typed -D

# ä½¿ç”¨ yarn
yarn add vite-plugin-env-typed -D

# ä½¿ç”¨ pnpm
pnpm add vite-plugin-env-typed -D
```

## ä½¿ç”¨æ–¹æ³•

1. åœ¨æ‚¨çš„ `vite.config.ts` ä¸­é…ç½®æ’ä»¶ï¼š

```typescript
import { defineConfig } from 'vite'
import envTyped from 'vite-plugin-env-typed'

export default defineConfig({
  plugins: [
    envTyped({
      // å¯é€‰ï¼šæŒ‡å®šç¯å¢ƒæ¨¡å¼ï¼Œé»˜è®¤ä¸º process.env.NODE_ENV æˆ– import.meta.env.MODE
      mode: 'development',
      // å¯é€‰ï¼šæŒ‡å®šç¯å¢ƒå˜é‡æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œé»˜è®¤ä¸º process.cwd()
      envDir: './',
      // å¯é€‰ï¼šæŒ‡å®šç¯å¢ƒå˜é‡å‰ç¼€ï¼Œé»˜è®¤ä¸º 'VITE_'
      envPrefix: ['VITE_', 'CUSTOM_'],
      // å¯é€‰ï¼šæŒ‡å®šç±»å‹å®šä¹‰æ–‡ä»¶è¾“å‡ºè·¯å¾„ï¼Œé»˜è®¤ä¸º 'src/import_meta.d.ts'
      filePath: './src/types/import_meta.d.ts',
      // å¯é€‰ï¼šæ˜¯å¦åœ¨ç±»å‹ä¸­åŒ…å«å®é™…å€¼ï¼Œé»˜è®¤ä¸º false
      valueInType: true
    })
  ]
})
```

2. åœ¨æ‚¨çš„ä»£ç ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š

```typescript
// ç°åœ¨æ‚¨å¯ä»¥è·å¾—å®Œæ•´çš„ç±»å‹æç¤º
console.log(import.meta.env.VITE_API_URL)
```

## é…ç½®é€‰é¡¹è¯¦è§£

æ’ä»¶æ”¯æŒä»¥ä¸‹é…ç½®é€‰é¡¹ï¼š

```typescript
interface EnvTypedOptions {
  /**
   * ç¯å¢ƒæ¨¡å¼
   * @default process.env.NODE_ENV æˆ– import.meta.env.MODE
   */
  mode?: 'development' | 'production' | string

  /**
   * ç¯å¢ƒå˜é‡æ–‡ä»¶æ‰€åœ¨ç›®å½•
   * @default process.cwd()
   */
  envDir?: string

  /**
   * ç¯å¢ƒå˜é‡å‰ç¼€
   * @default 'VITE_'
   */
  envPrefix?: string | string[]

  /**
   * ç±»å‹å®šä¹‰æ–‡ä»¶è¾“å‡ºè·¯å¾„
   * @default 'src/import_meta.d.ts'
   */
  filePath?: string

  /**
   * æ˜¯å¦åœ¨ç±»å‹ä¸­åŒ…å«å®é™…å€¼
   * @default false
   * @example
   * // å½“ valueInType ä¸º false æ—¶
   * VITE_API_URL: string
   * // å½“ valueInType ä¸º true æ—¶
   * VITE_API_URL: 'https://api.example.com'
   */
  valueInType?: boolean
}
```

## ç¤ºä¾‹

### åŸºç¡€é…ç½®

```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import envTyped from 'vite-plugin-env-typed'

export default defineConfig({
  plugins: [envTyped()]
})
```

### è‡ªå®šä¹‰ç¯å¢ƒå˜é‡å‰ç¼€

```typescript
// vite.config.ts
export default defineConfig({
  plugins: [
    envTyped({
      envPrefix: ['VITE_', 'CUSTOM_']
    })
  ]
})
```

### åŒ…å«å®é™…å€¼

```typescript
// vite.config.ts
export default defineConfig({
  plugins: [
    envTyped({
      valueInType: true
    })
  ]
})
```

## ğŸ“ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ `issue` æˆ– `pull request`ï¼Œå…±åŒå®Œå–„ `vite-plugin-env-typed`ã€‚

## ğŸ“„ è®¸å¯è¯

MIT

## è”ç³»æˆ‘ä»¬

- [GitHub Issues](https://github.com/JsonLee12138/vite-plugin-env-typed/issues)
- Email: jsonlee_12138@icloud.com
- Discord: https://discord.gg/666U6JTCQY
